(this["webpackJsonpreact-contact-app"]=this["webpackJsonpreact-contact-app"]||[]).push([[0],{46:function(e,t,a){e.exports=a(79)},51:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),o=a.n(r),i=(a(51),a(5)),c=a(8),s=a(9),m=a(11),u=a(10),d=a(12),p=a(19),h=a.n(p),f=a(87),b=a(85),g=a(88),E=a(13);var v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={fields:{name:"",phno:"",email:""},errors:{name:"",phno:"",email:""},filePreview:null,fileToUpload:null},a.handleCancelAddContact=a.handleCancelAddContact.bind(Object(i.a)(a)),a.handleSaveAddContact=a.handleSaveAddContact.bind(Object(i.a)(a)),a.handleChange=a.handleChange.bind(Object(i.a)(a)),a.uploadImage=a.uploadImage.bind(Object(i.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleCancelAddContact",value:function(e){e.preventDefault(),window.location.replace("/")}},{key:"handleChange",value:function(e){var t=this.state.fields;"name"===e.target.name&&(""===e.target.value||/^[A-Za-z ]{1,25}$/.test(e.target.value))&&(t[e.target.name]=e.target.value),"phno"===e.target.name&&(""===e.target.value||/^[0-9]{1,10}$/.test(e.target.value))&&(t[e.target.name]=e.target.value),"email"===e.target.name&&(""===e.target.value||"undefined"===typeof e.target.value?t[e.target.name]="":t[e.target.name]=e.target.value),this.setState({fields:t}),e.preventDefault()}},{key:"handleSaveAddContact",value:function(e){if(this.validateAddContactForm()){var t=this.state.fields,a=new FormData;a.append("file",this.state.fileToUpload),a.append("name",t.name.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")),a.append("phno",t.phno),a.append("email",t.email),console.log("all fields:",this.state.fields,this.state.fileToUpload,a.get("file")),h.a.post("http://localhost:7000/addContact",a,{}).then((function(e){console.log(e.data),e.data.success?(alert("Contact saved successfully"),window.location.replace("/")):(alert("You already have a contact with that name/phone number"),window.location.replace("/"))})),t.name="",t.phno="",t.email="",this.setState({fields:t})}e.preventDefault()}},{key:"validateAddContactForm",value:function(){var e=this.state.fields,t={},a=!0;return e.name||(a=!1,t.name="Please provide contact name"),e.phno||(a=!1,t.phno="Please provide contact number"),"undefined"!==typeof e.phno&&(/^[0-9]{10}$/.test(e.phno)||(a=!1,t.phno="Please provide valid contact number",e.phno="")),this.setState({errors:t}),a}},{key:"uploadImage",value:function(e){var t=this;this.setState({filePreview:URL.createObjectURL(e.target.files[0])},(function(){console.log("Selected File:",t.state.filePreview)})),this.setState({fileToUpload:e.target.files[0]},(function(){console.log("File to upload:",t.state.fileToUpload)})),e.preventDefault()}},{key:"render",value:function(){return l.a.createElement(b.a,{onSubmit:this.handleSaveAddContact,onReset:this.handleCancelAddContact,noValidate:!0,encType:"multipart/form-data",autoComplete:"off"},l.a.createElement(b.a.Group,null,l.a.createElement(f.a,null,l.a.createElement(f.a.Img,{variant:"top",src:this.state.filePreview||"background.png",className:"avatar-background",alt:"default image",title:"Display Picture"}))),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,{className:"btn button btn-block btn-primary",htmlFor:"upload",title:"Choose Picture"},l.a.createElement("input",{id:"upload",name:"file",type:"file",accept:"image/*",className:"d-none",onChange:this.uploadImage}),l.a.createElement(E.e,null),"\xa0Choose Picture")),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Name"),l.a.createElement(b.a.Control,{type:"text",placeholder:"Enter Name",className:"styled-control",value:this.state.fields.name,id:"name",name:"name",onChange:this.handleChange,maxLength:"25",title:"Contact Name"}),l.a.createElement(b.a.Label,{className:"error-label"},this.state.errors.name)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Phone"),l.a.createElement(b.a.Control,{type:"text",placeholder:"Enter Phone Number",className:"styled-control",value:this.state.fields.phno,id:"phno",name:"phno",onChange:this.handleChange,maxLength:"10",title:"Contact Number"}),l.a.createElement(b.a.Label,{className:"error-label"},this.state.errors.phno)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Email"),l.a.createElement(b.a.Control,{type:"email",placeholder:"Enter Email",className:"styled-control",value:this.state.fields.email,id:"email",name:"email",onChange:this.handleChange,title:"Contact Email ID"}),l.a.createElement(b.a.Label,{className:"error-label"},this.state.errors.email)),l.a.createElement(g.a,{variant:"primary",className:"button",type:"reset",style:{float:"left"},title:"Cancel Save"},l.a.createElement(E.d,null),"\xa0Cancel"),l.a.createElement(g.a,{variant:"primary",className:"button",type:"submit",style:{float:"right"},title:"Save Contact"},l.a.createElement(E.a,null),"\xa0Save"))}}]),t}(l.a.Component),C=function(){return l.a.createElement("div",null,l.a.createElement(f.a,{style:{width:"450px",height:"auto",borderRadius:"6px"},id:"addCardId"},l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement(v,null)))))},y=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(f.a,{style:{width:"450px",height:"auto",borderRadius:"6px"},id:"editCardId"},l.a.createElement(f.a.Body,null,l.a.createElement(O,{name:this.props.name,phno:this.props.phno,email:this.props.email,image:this.props.image})))}}]),t}(l.a.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={fileToUpdate:null,filePreview:null,fields:{name:a.props.name,phno:a.props.phno,email:a.props.email},errors:{name:"",phno:"",email:""}},a.handleCancel=a.handleCancel.bind(Object(i.a)(a)),a.handleSave=a.handleSave.bind(Object(i.a)(a)),a.updateImage=a.updateImage.bind(Object(i.a)(a)),a.handleChange=a.handleChange.bind(Object(i.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.state.fields;"name"===e.target.name&&(""===e.target.value||/^[A-Za-z ]{1,25}$/.test(e.target.value))&&(t[e.target.name]=e.target.value),"phno"===e.target.name&&(""===e.target.value||/^[0-9]{1,10}$/.test(e.target.value))&&(t[e.target.name]=e.target.value),"email"===e.target.name&&(t[e.target.name]=e.target.value),this.setState({fields:t}),e.preventDefault()}},{key:"handleCancel",value:function(e){e.preventDefault(),window.location.replace("/")}},{key:"handleSave",value:function(e){if(e.preventDefault(),this.validateEditContactForm()){console.log("Original Values:",this.props),console.log("Edited Values:",this.state.fields,this.state.fileToUpdate);var t=this.state.fields,a=new FormData;a.append("file",this.state.fileToUpdate),a.append("name",t.name),a.append("phno",t.phno),a.append("email",t.email),a.append("previousName",this.props.name),a.append("previousPhno",this.props.phno),a.append("previousEmail",this.props.email),a.append("previousImage",this.props.image),h.a.post("http://localhost:7000/updateContact",a,{}).then((function(e){e.data.success?(alert("Contact updated successfully"),window.location.replace("/")):(alert("Contact update failed"),window.location.replace("/"))}))}}},{key:"validateEditContactForm",value:function(){var e=this.state.fields,t={},a=!0;return e.name||(a=!1,t.name="Please provide contact name"),e.phno||(a=!1,t.phno="Please provide contact number"),"undefined"!==typeof e.phno&&(/^[0-9]{10}$/.test(e.phno)||(a=!1,t.phno="Please provide valid contact number")),this.setState({errors:t}),a}},{key:"updateImage",value:function(e){var t=this;this.setState({fileToUpdate:e.target.files[0]},(function(){console.log("File to update:",t.state.fileToUpdate)})),this.setState({filePreview:URL.createObjectURL(e.target.files[0])},(function(){console.log("File to update preview:",t.state.filePreview),document.getElementById("image").src=t.state.filePreview}))}},{key:"render",value:function(){return l.a.createElement(b.a,{onSubmit:this.handleSave,onReset:this.handleCancel,noValidate:!0,encType:"multipart/form-data",autoComplete:"off"},l.a.createElement(b.a.Group,null,l.a.createElement(f.a,null,l.a.createElement(f.a.Img,{variant:"top",id:"image",src:this.props.image||"user1.png",className:"avatar-background",alt:"default image",title:"Display Picture"}))),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,{className:"btn btn-primary btn-block button",htmlFor:"update",title:"Change Picture"},l.a.createElement(b.a.Control,{id:"update",name:"update",type:"file",accept:"image/*",className:"d-none",onChange:this.updateImage}),l.a.createElement(E.e,null),"\xa0Change Picture")),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Name"),l.a.createElement(b.a.Control,{type:"text",name:"name",placeholder:"Enter Name",className:"styled-control",value:this.state.fields.name,onChange:this.handleChange,title:"Contact Name",maxLength:"25"}),l.a.createElement(b.a.Label,{className:"error-label"},this.state.errors.name)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Phone"),l.a.createElement(b.a.Control,{type:"text",name:"phno",placeholder:"Enter Phone No",className:"styled-control",value:this.state.fields.phno,onChange:this.handleChange,maxLength:"10",title:"Contact Number"}),l.a.createElement(b.a.Label,{className:"error-label"},this.state.errors.phno)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Email"),l.a.createElement(b.a.Control,{type:"email",name:"email",placeholder:"Enter Email",className:"styled-control",value:this.state.fields.email,onChange:this.handleChange,title:"Contact Email ID"}),l.a.createElement(b.a.Label,{className:"error-label"},this.state.errors.email)),l.a.createElement(g.a,{variant:"primary",className:"button",type:"reset",style:{float:"left"},title:"Cancel Changes"},l.a.createElement(E.d,null),"\xa0Cancel"),l.a.createElement(g.a,{variant:"primary",className:"button",type:"submit",style:{float:"right"},title:"Save Changes"},l.a.createElement(E.a,null),"\xa0Save"))}}]),t}(l.a.Component),j=y,N=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(f.a,{style:{width:"450px",height:"auto",borderRadius:"6px"},id:"viewCardId"},l.a.createElement(f.a.Body,null,l.a.createElement(w,{phno:this.props.phno,email:this.props.email,name:this.props.name,image:this.props.image})))}}]),t}(l.a.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleEdit=a.handleEdit.bind(Object(i.a)(a)),a.handleEditCancel=a.handleEditCancel.bind(Object(i.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleEdit",value:function(e){o.a.render(l.a.createElement(j,{name:this.props.name,phno:this.props.phno,email:this.props.email,image:this.props.image}),document.getElementById("target")),e.preventDefault()}},{key:"handleEditCancel",value:function(e){window.location.replace("/")}},{key:"render",value:function(){return l.a.createElement(b.a,{onSubmit:this.handleEdit,onReset:this.handleEditCancel},l.a.createElement(b.a.Group,null,l.a.createElement(f.a,null,l.a.createElement(f.a.Img,{variant:"top",src:this.props.image,className:"avatar-background",alt:"default image",title:"Display Picture"}),l.a.createElement(f.a.ImgOverlay,{style:{color:"white"}},l.a.createElement("span",{title:"Contact Name"},this.props.name)))),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Name"),l.a.createElement(b.a.Control,{className:"styled-control",value:this.props.name,plaintext:"true",readOnly:!0,title:"Contact Name"}),l.a.createElement(b.a.Label,null)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Phone"),l.a.createElement(b.a.Control,{className:"styled-control",value:this.props.phno,plaintext:"true",readOnly:!0,title:"Contact Number"}),l.a.createElement(b.a.Label,null)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Email"),l.a.createElement(b.a.Control,{className:"styled-control",value:this.props.email,plaintext:"true",readOnly:!0,title:"Contact Email ID"}),l.a.createElement(b.a.Label,null)),l.a.createElement(g.a,{variant:"primary",className:"button",type:"reset",style:{float:"left"},title:"Close"},l.a.createElement(E.d,null),"\xa0Cancel"),l.a.createElement(g.a,{variant:"primary",className:"button",type:"submit",style:{float:"right"},title:"Edit Contact"},l.a.createElement(E.b,null),"\xa0Edit"))}}]),t}(l.a.Component),k=N,S=a(81),L=a(42),P=a(86),I=a(82),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={data:[],items:[],noResult:"",totalContacts:0,noContacts:""},a.searchHandler=a.searchHandler.bind(Object(i.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.get("http://localhost:7000/contactList").then((function(t){t.data.data.sort((function(e,t){return(e.name>t.name)-(e.name<t.name)})),e.setState({data:t.data.data}),e.setState({items:e.state.data}),e.setState({totalContacts:t.data.data.length}),0===e.state.data.length&&e.setState({noContacts:"No contacts to show"}),console.log("items:",e.state.items)}))}},{key:"searchHandler",value:function(e){var t=this.state.data;0===(t=t.filter((function(t){return-1!==t.name.toLowerCase().search(e.target.value.toLowerCase())}))).length?this.setState({noResult:"No results found"}):this.setState({noResult:""}),this.setState({items:t})}},{key:"render",value:function(){return l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(b.a.Group,{as:S.a,id:"search"},l.a.createElement(L.a,{md:4},l.a.createElement("span",null,"Total: ",this.state.totalContacts+" contacts")),l.a.createElement(L.a,{md:8},l.a.createElement(b.a.Control,{type:"text",placeholder:"Search Contact",className:"styledControl search-button",title:"Search Contact",onChange:this.searchHandler}))),l.a.createElement(b.a.Group,{as:S.a},l.a.createElement(L.a,{md:12},l.a.createElement(P.a,{variant:"flush",id:"scrollable"},this.state.items.map((function(e,t){return l.a.createElement(P.a.Item,{variant:"primary",action:!0,className:"borderless",key:t,onClick:function(t){o.a.render(l.a.createElement(k,{name:e.name,phno:e.phno,email:e.email,image:e.image.replace("public/","http://localhost:7000/")}),document.getElementById("target")),console.log("Onclick:",e.name,e.phno,e.email)}},l.a.createElement(I.a,{src:e.image.replace("public/","http://localhost:7000/"),alt:"user",style:{borderRadius:"50%",width:"40px",height:"40px"}}),l.a.createElement("span",null,e.name))}))),l.a.createElement("span",{className:"align-center text-center"},this.state.noResult),l.a.createElement("span",{className:"align-center text-center"},this.state.noContacts))))}}]),t}(l.a.Component),D=a(83),G=(a(70),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(e){return setTimeout((function(){return e()}),250)})).then((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){return this.state.loading?null:l.a.createElement(D.a,{fluid:!0},l.a.createElement(S.a,null,l.a.createElement(L.a,{md:5,lg:5,xl:5},l.a.createElement(x,null)),l.a.createElement(L.a,{md:{span:7},lg:{span:5,offset:2},xl:{span:5,offset:2},id:"target"},l.a.createElement(A,null))))}}]),t}(l.a.Component));var A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(i.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){o.a.render(l.a.createElement(C,null),document.getElementById("target")),e.preventDefault()}},{key:"render",value:function(){return l.a.createElement(b.a,{onSubmit:this.handleSubmit,id:"addBtn"},l.a.createElement(g.a,{type:"submit",size:"lg",variant:"light",className:"add-button",title:"Add New Contact"},l.a.createElement(E.c,null)))}}]),t}(l.a.Component),R=G,U=a(84);function T(){return l.a.createElement(U.a,{bg:"dark",variant:"dark",sticky:"top"},l.a.createElement(B,null))}function B(){return l.a.createElement(U.a.Brand,{href:"#home"},"Address Book")}var F=function(){return l.a.createElement(T,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(F,null),document.getElementById("header")),o.a.render(l.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.566f4773.chunk.js.map