{"ast":null,"code":"import _assertThisInitialized from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import{Card,Form,Button}from'react-bootstrap';import{FaCheck,FaTimes,FaUpload}from'react-icons/fa';var EditContact=/*#__PURE__*/function(_React$Component){_inherits(EditContact,_React$Component);function EditContact(){_classCallCheck(this,EditContact);return _possibleConstructorReturn(this,_getPrototypeOf(EditContact).apply(this,arguments));}_createClass(EditContact,[{key:\"render\",value:function render(){return React.createElement(Card,{style:{width:'450px',height:'auto',borderRadius:'6px'},id:\"editCardId\"},React.createElement(Card.Body,null,React.createElement(EditCardForm,{name:this.props.name,phno:this.props.phno,email:this.props.email,image:this.props.image})));}}]);return EditContact;}(React.Component);;var EditCardForm=/*#__PURE__*/function(_React$Component2){_inherits(EditCardForm,_React$Component2);function EditCardForm(props){var _this;_classCallCheck(this,EditCardForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditCardForm).call(this,props));_this.state={fileToUpdate:null,filePreview:null,fields:{name:_this.props.name,phno:_this.props.phno,email:_this.props.email},errors:{name:\"\",phno:\"\",email:\"\"}};_this.handleCancel=_this.handleCancel.bind(_assertThisInitialized(_this));_this.handleSave=_this.handleSave.bind(_assertThisInitialized(_this));_this.updateImage=_this.updateImage.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(EditCardForm,[{key:\"handleChange\",/*componentDidMount()\n    {\n        const {name,phno,email}=this.props;\n        document.getElementById(\"name\").value=name;\n        document.getElementById(\"phno\").value=phno;\n        document.getElementById(\"email\").value=email;\n    } */value:function handleChange(event){var fields=this.state.fields;var nameReg=/^[A-Za-z ]{1,25}$/;var phnoReg=/^[0-9]{1,10}$/;if(event.target.name===\"name\"){if(event.target.value===''||nameReg.test(event.target.value)){fields[event.target.name]=event.target.value;}}if(event.target.name===\"phno\"){if(event.target.value===''||phnoReg.test(event.target.value)){fields[event.target.name]=event.target.value;}}if(event.target.name===\"email\"){fields[event.target.name]=event.target.value;}this.setState({fields:fields});event.preventDefault();}},{key:\"handleCancel\",value:function handleCancel(event){event.preventDefault();//document.getElementById(\"editCardId\").style.display=\"none\";\nwindow.location.replace(\"/\");//ReactDOM.render(<App/>,document.getElementById('root'));\n}},{key:\"handleSave\",value:function handleSave(event){event.preventDefault();//console.log(\"Display value:\",this.props)\nif(this.validateEditContactForm()){console.log(\"Original Values:\",this.props);console.log(\"Edited Values:\",this.state.fields,this.state.fileToUpdate);var fields=this.state.fields;var fd=new FormData();fd.append(\"file\",this.state.fileToUpdate);fd.append(\"name\",fields[\"name\"]);fd.append(\"phno\",fields[\"phno\"]);fd.append(\"email\",fields[\"email\"]);fd.append(\"previousName\",this.props.name);fd.append(\"previousPhno\",this.props.phno);fd.append(\"previousEmail\",this.props.email);fd.append(\"previousImage\",this.props.image);//console.log(\"update picture:\",fd.get(\"file\"));\naxios.post('http://localhost:7000/updateContact',fd,{}).then(function(res){if(res.data.success){alert(\"Contact updated successfully\");window.location.replace(\"/\");}else{alert(\"Contact update failed\");window.location.replace(\"/\");}});}}},{key:\"validateEditContactForm\",value:function validateEditContactForm(){var fields=this.state.fields;var errors={};var formIsValid=true;if(!fields[\"name\"]){formIsValid=false;errors[\"name\"]=\"Please provide contact name\";}if(!fields[\"phno\"]){formIsValid=false;errors[\"phno\"]=\"Please provide contact number\";}if(typeof fields[\"phno\"]!==\"undefined\"){if(!/^[0-9]{10}$/.test(fields[\"phno\"])){formIsValid=false;errors[\"phno\"]=\"Please provide valid contact number\";//fields[\"phno\"]=\"\";\n}}/*if(typeof fields[\"email\"]!==\"undefined\")\n        {\n            if(!fields[\"email\"].match(/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/))\n            {\n                formIsValid=false;\n                errors[\"email\"]=\"Please provide valid email id or leave it empty\";\n                //fields[\"email\"]=\"\";\n            }\n        }*/this.setState({errors:errors});return formIsValid;}},{key:\"updateImage\",value:function updateImage(event){var _this2=this;this.setState({fileToUpdate:event.target.files[0]},function(){console.log(\"File to update:\",_this2.state.fileToUpdate);});this.setState({filePreview:URL.createObjectURL(event.target.files[0])},function(){console.log(\"File to update preview:\",_this2.state.filePreview);document.getElementById(\"image\").src=_this2.state.filePreview;});}},{key:\"render\",value:function render(){return React.createElement(Form,{onSubmit:this.handleSave,onReset:this.handleCancel,noValidate:true,encType:\"multipart/form-data\",autoComplete:\"off\"},React.createElement(Form.Group,null,React.createElement(Card,null,React.createElement(Card.Img,{variant:\"top\",id:\"image\",src:this.props.image||\"user1.png\",className:\"avatar-background\",alt:\"default image\",title:\"Display Picture\"}))),React.createElement(Form.Group,null,React.createElement(Form.Label,{className:\"btn btn-primary btn-block button\",htmlFor:\"update\",title:\"Change Picture\"},React.createElement(Form.Control,{id:\"update\",name:\"update\",type:\"file\",accept:\"image/*\",className:\"d-none\",onChange:this.updateImage}),React.createElement(FaUpload,null),\"\\xA0Change Picture\")),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Name\"),React.createElement(Form.Control,{type:\"text\",name:\"name\",placeholder:\"Enter Name\",className:\"styled-control\",value:this.state.fields.name,onChange:this.handleChange,title:\"Contact Name\",maxLength:\"25\"}),React.createElement(Form.Label,{className:\"error-label\"},this.state.errors.name)),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Phone\"),React.createElement(Form.Control,{type:\"text\",name:\"phno\",placeholder:\"Enter Phone No\",className:\"styled-control\",value:this.state.fields.phno,onChange:this.handleChange,maxLength:\"10\",title:\"Contact Number\"}),React.createElement(Form.Label,{className:\"error-label\"},this.state.errors.phno)),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Email\"),React.createElement(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Enter Email\",className:\"styled-control\",value:this.state.fields.email,onChange:this.handleChange,title:\"Contact Email ID\"}),React.createElement(Form.Label,{className:\"error-label\"},this.state.errors.email)),React.createElement(Button,{variant:\"primary\",className:\"button\",type:\"reset\",style:{float:'left'},title:\"Cancel Changes\"},React.createElement(FaTimes,null),\"\\xA0Cancel\"),React.createElement(Button,{variant:\"primary\",className:\"button\",type:\"submit\",style:{float:'right'},title:\"Save Changes\"},React.createElement(FaCheck,null),\"\\xA0Save\"));}}]);return EditCardForm;}(React.Component);;export default EditContact;","map":{"version":3,"sources":["/home/dineshubuntu/project/Address-Book/frontend/src/editContact.js"],"names":["React","axios","Card","Form","Button","FaCheck","FaTimes","FaUpload","EditContact","width","height","borderRadius","props","name","phno","email","image","Component","EditCardForm","state","fileToUpdate","filePreview","fields","errors","handleCancel","bind","handleSave","updateImage","handleChange","event","nameReg","phnoReg","target","value","test","setState","preventDefault","window","location","replace","validateEditContactForm","console","log","fd","FormData","append","post","then","res","data","success","alert","formIsValid","files","URL","createObjectURL","document","getElementById","src","float"],"mappings":"wgCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,IAAR,CAAaC,IAAb,CAAkBC,MAAlB,KAA+B,iBAA/B,CACA,OAAQC,OAAR,CAAgBC,OAAhB,CAAwBC,QAAxB,KAAuC,gBAAvC,C,GAEMC,CAAAA,W,qSACO,CACT,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAmBC,MAAM,CAAE,MAA3B,CAAkCC,YAAY,CAAC,KAA/C,CAAb,CAAoE,EAAE,CAAC,YAAvE,EACA,oBAAC,IAAD,CAAM,IAAN,MACQ,oBAAC,YAAD,EAAc,IAAI,CAAE,KAAKC,KAAL,CAAWC,IAA/B,CAAqC,IAAI,CAAE,KAAKD,KAAL,CAAWE,IAAtD,CAA4D,KAAK,CAAE,KAAKF,KAAL,CAAWG,KAA9E,CAAqF,KAAK,CAAE,KAAKH,KAAL,CAAWI,KAAvG,EADR,CADA,CADJ,CAME,C,yBARoBhB,KAAK,CAACiB,S,EAS/B,C,GAEKC,CAAAA,Y,oFACF,sBAAYN,KAAZ,CAAkB,8CACd,8EAAMA,KAAN,GACA,MAAKO,KAAL,CAAW,CAACC,YAAY,CAAC,IAAd,CAAmBC,WAAW,CAAC,IAA/B,CACPC,MAAM,CAAC,CAACT,IAAI,CAAC,MAAKD,KAAL,CAAWC,IAAjB,CAAsBC,IAAI,CAAC,MAAKF,KAAL,CAAWE,IAAtC,CAA2CC,KAAK,CAAC,MAAKH,KAAL,CAAWG,KAA5D,CADA,CAEPQ,MAAM,CAAC,CAACV,IAAI,CAAC,EAAN,CAASC,IAAI,CAAC,EAAd,CAAiBC,KAAK,CAAC,EAAvB,CAFA,CAAX,CAIA,MAAKS,YAAL,CAAkB,MAAKA,YAAL,CAAkBC,IAAlB,+BAAlB,CACA,MAAKC,UAAL,CAAgB,MAAKA,UAAL,CAAgBD,IAAhB,+BAAhB,CACA,MAAKE,WAAL,CAAiB,MAAKA,WAAL,CAAiBF,IAAjB,+BAAjB,CACA,MAAKG,YAAL,CAAkB,MAAKA,YAAL,CAAkBH,IAAlB,+BAAlB,CATc,aAUjB,C,+CACD;;;;;;oCAOaI,K,CAAM,CACf,GAAIP,CAAAA,MAAM,CAAC,KAAKH,KAAL,CAAWG,MAAtB,CACA,GAAMQ,CAAAA,OAAO,CAAC,mBAAd,CACA,GAAMC,CAAAA,OAAO,CAAC,eAAd,CACA,GAAGF,KAAK,CAACG,MAAN,CAAanB,IAAb,GAAoB,MAAvB,CACA,CACI,GAAGgB,KAAK,CAACG,MAAN,CAAaC,KAAb,GAAqB,EAArB,EAA2BH,OAAO,CAACI,IAAR,CAAaL,KAAK,CAACG,MAAN,CAAaC,KAA1B,CAA9B,CACA,CACIX,MAAM,CAACO,KAAK,CAACG,MAAN,CAAanB,IAAd,CAAN,CAA0BgB,KAAK,CAACG,MAAN,CAAaC,KAAvC,CACH,CACJ,CACD,GAAGJ,KAAK,CAACG,MAAN,CAAanB,IAAb,GAAoB,MAAvB,CACA,CACI,GAAGgB,KAAK,CAACG,MAAN,CAAaC,KAAb,GAAqB,EAArB,EAA2BF,OAAO,CAACG,IAAR,CAAaL,KAAK,CAACG,MAAN,CAAaC,KAA1B,CAA9B,CACA,CACIX,MAAM,CAACO,KAAK,CAACG,MAAN,CAAanB,IAAd,CAAN,CAA0BgB,KAAK,CAACG,MAAN,CAAaC,KAAvC,CACH,CACJ,CACD,GAAGJ,KAAK,CAACG,MAAN,CAAanB,IAAb,GAAoB,OAAvB,CACA,CACIS,MAAM,CAACO,KAAK,CAACG,MAAN,CAAanB,IAAd,CAAN,CAA0BgB,KAAK,CAACG,MAAN,CAAaC,KAAvC,CACH,CAED,KAAKE,QAAL,CAAc,CAACb,MAAM,CAANA,MAAD,CAAd,EACAO,KAAK,CAACO,cAAN,GACH,C,kDAEYP,K,CAAM,CACfA,KAAK,CAACO,cAAN,GACA;AACDC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB,EACC;AACH,C,8CAEUV,K,CAAM,CACbA,KAAK,CAACO,cAAN,GACA;AACA,GAAG,KAAKI,uBAAL,EAAH,CACA,CACIC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAA+B,KAAK9B,KAApC,EACA6B,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA6B,KAAKvB,KAAL,CAAWG,MAAxC,CAA+C,KAAKH,KAAL,CAAWC,YAA1D,EACA,GAAIE,CAAAA,MAAM,CAAC,KAAKH,KAAL,CAAWG,MAAtB,CACA,GAAMqB,CAAAA,EAAE,CAAC,GAAIC,CAAAA,QAAJ,EAAT,CACAD,EAAE,CAACE,MAAH,CAAU,MAAV,CAAiB,KAAK1B,KAAL,CAAWC,YAA5B,EACAuB,EAAE,CAACE,MAAH,CAAU,MAAV,CAAiBvB,MAAM,CAAC,MAAD,CAAvB,EACAqB,EAAE,CAACE,MAAH,CAAU,MAAV,CAAiBvB,MAAM,CAAC,MAAD,CAAvB,EACAqB,EAAE,CAACE,MAAH,CAAU,OAAV,CAAkBvB,MAAM,CAAC,OAAD,CAAxB,EACAqB,EAAE,CAACE,MAAH,CAAU,cAAV,CAAyB,KAAKjC,KAAL,CAAWC,IAApC,EACA8B,EAAE,CAACE,MAAH,CAAU,cAAV,CAAyB,KAAKjC,KAAL,CAAWE,IAApC,EACA6B,EAAE,CAACE,MAAH,CAAU,eAAV,CAA0B,KAAKjC,KAAL,CAAWG,KAArC,EACA4B,EAAE,CAACE,MAAH,CAAU,eAAV,CAA0B,KAAKjC,KAAL,CAAWI,KAArC,EACA;AACAf,KAAK,CAAC6C,IAAN,CAAW,qCAAX,CAAiDH,EAAjD,CAAoD,EAApD,EACCI,IADD,CACM,SAACC,GAAD,CAAO,CACT,GAAGA,GAAG,CAACC,IAAJ,CAASC,OAAZ,CACA,CACIC,KAAK,CAAC,8BAAD,CAAL,CACAd,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB,EACH,CAJD,IAKI,CACAY,KAAK,CAAC,uBAAD,CAAL,CACAd,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB,EACH,CACJ,CAXD,EAYH,CACJ,C,yEAEwB,CACrB,GAAIjB,CAAAA,MAAM,CAAC,KAAKH,KAAL,CAAWG,MAAtB,CACA,GAAIC,CAAAA,MAAM,CAAC,EAAX,CACA,GAAI6B,CAAAA,WAAW,CAAC,IAAhB,CACA,GAAG,CAAC9B,MAAM,CAAC,MAAD,CAAV,CACA,CACI8B,WAAW,CAAC,KAAZ,CACA7B,MAAM,CAAC,MAAD,CAAN,CAAe,6BAAf,CACH,CACD,GAAG,CAACD,MAAM,CAAC,MAAD,CAAV,CACA,CACI8B,WAAW,CAAC,KAAZ,CACA7B,MAAM,CAAC,MAAD,CAAN,CAAe,+BAAf,CACH,CACD,GAAG,MAAOD,CAAAA,MAAM,CAAC,MAAD,CAAb,GAAwB,WAA3B,CACA,CACI,GAAG,CAAC,cAAcY,IAAd,CAAmBZ,MAAM,CAAC,MAAD,CAAzB,CAAJ,CACA,CACI8B,WAAW,CAAC,KAAZ,CACA7B,MAAM,CAAC,MAAD,CAAN,CAAe,qCAAf,CACA;AACH,CACJ,CACD;;;;;;;;WASA,KAAKY,QAAL,CAAc,CAACZ,MAAM,CAANA,MAAD,CAAd,EACA,MAAO6B,CAAAA,WAAP,CACH,C,gDAEWvB,K,CAAM,iBACd,KAAKM,QAAL,CAAc,CAACf,YAAY,CAACS,KAAK,CAACG,MAAN,CAAaqB,KAAb,CAAmB,CAAnB,CAAd,CAAd,CAAmD,UAAI,CACnDZ,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA8B,MAAI,CAACvB,KAAL,CAAWC,YAAzC,EACH,CAFD,EAGA,KAAKe,QAAL,CAAc,CAACd,WAAW,CAACiC,GAAG,CAACC,eAAJ,CAAoB1B,KAAK,CAACG,MAAN,CAAaqB,KAAb,CAAmB,CAAnB,CAApB,CAAb,CAAd,CAAuE,UAAI,CACvEZ,OAAO,CAACC,GAAR,CAAY,yBAAZ,CAAsC,MAAI,CAACvB,KAAL,CAAWE,WAAjD,EACAmC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,GAAjC,CAAqC,MAAI,CAACvC,KAAL,CAAWE,WAAhD,CACH,CAHD,EAIH,C,uCAEO,CACR,MACI,qBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKK,UAArB,CAAiC,OAAO,CAAE,KAAKF,YAA/C,CAA6D,UAAU,KAAvE,CAAwE,OAAO,CAAC,qBAAhF,CAAsG,YAAY,CAAC,KAAnH,EACI,oBAAC,IAAD,CAAM,KAAN,MACJ,oBAAC,IAAD,MACI,oBAAC,IAAD,CAAM,GAAN,EAAU,OAAO,CAAC,KAAlB,CAAwB,EAAE,CAAC,OAA3B,CAAmC,GAAG,CAAG,KAAKZ,KAAL,CAAWI,KAAX,EAAoB,WAA7D,CAA0E,SAAS,CAAC,mBAApF,CAAwG,GAAG,CAAC,eAA5G,CAA4H,KAAK,CAAC,iBAAlI,EADJ,CADI,CADJ,CAOI,oBAAC,IAAD,CAAM,KAAN,MACG,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,kCAAtB,CAAyD,OAAO,CAAC,QAAjE,CAA0E,KAAK,CAAC,gBAAhF,EACK,oBAAC,IAAD,CAAM,OAAN,EAAc,EAAE,CAAC,QAAjB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,IAAI,CAAC,MAA7C,CAAoD,MAAM,CAAC,SAA3D,CAAqE,SAAS,CAAC,QAA/E,CAAwF,QAAQ,CAAE,KAAKW,WAAvG,EADL,CAC0H,oBAAC,QAAD,MAD1H,sBADH,CAPJ,CAYI,oBAAC,IAAD,CAAM,KAAN,MACA,oBAAC,IAAD,CAAM,KAAN,aADA,CAEA,oBAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,IAAI,CAAC,MAA/B,CAAsC,WAAW,CAAC,YAAlD,CAA+D,SAAS,CAAC,gBAAzE,CAA0F,KAAK,CAAE,KAAKR,KAAL,CAAWG,MAAX,CAAkBT,IAAnH,CAA0H,QAAQ,CAAE,KAAKe,YAAzI,CAAuJ,KAAK,CAAC,cAA7J,CAA4K,SAAS,CAAC,IAAtL,EAFA,CAGA,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,aAAtB,EAAqC,KAAKT,KAAL,CAAWI,MAAX,CAAkBV,IAAvD,CAHA,CAZJ,CAiBA,oBAAC,IAAD,CAAM,KAAN,MACI,oBAAC,IAAD,CAAM,KAAN,cADJ,CAEI,oBAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,IAAI,CAAC,MAA/B,CAAsC,WAAW,CAAC,gBAAlD,CAAmE,SAAS,CAAC,gBAA7E,CAA8F,KAAK,CAAE,KAAKM,KAAL,CAAWG,MAAX,CAAkBR,IAAvH,CAA6H,QAAQ,CAAE,KAAKc,YAA5I,CAA0J,SAAS,CAAC,IAApK,CAAyK,KAAK,CAAC,gBAA/K,EAFJ,CAGI,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,aAAtB,EAAqC,KAAKT,KAAL,CAAWI,MAAX,CAAkBT,IAAvD,CAHJ,CAjBA,CAsBA,oBAAC,IAAD,CAAM,KAAN,MACI,oBAAC,IAAD,CAAM,KAAN,cADJ,CAEI,oBAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,OAAnB,CAA2B,IAAI,CAAC,OAAhC,CAAwC,WAAW,CAAC,aAApD,CAAkE,SAAS,CAAC,gBAA5E,CAA6F,KAAK,CAAE,KAAKK,KAAL,CAAWG,MAAX,CAAkBP,KAAtH,CAA6H,QAAQ,CAAE,KAAKa,YAA5I,CAA0J,KAAK,CAAC,kBAAhK,EAFJ,CAGI,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,aAAtB,EAAqC,KAAKT,KAAL,CAAWI,MAAX,CAAkBR,KAAvD,CAHJ,CAtBA,CA2BA,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,SAAS,CAAC,QAApC,CAA6C,IAAI,CAAC,OAAlD,CAA0D,KAAK,CAAE,CAAC4C,KAAK,CAAC,MAAP,CAAjE,CAAiF,KAAK,CAAC,gBAAvF,EAAwG,oBAAC,OAAD,MAAxG,cA3BA,CA4BA,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,SAAS,CAAC,QAApC,CAA6C,IAAI,CAAC,QAAlD,CAA2D,KAAK,CAAE,CAACA,KAAK,CAAC,OAAP,CAAlE,CAAmF,KAAK,CAAC,cAAzF,EAAwG,oBAAC,OAAD,MAAxG,YA5BA,CADJ,CAgCE,C,0BArKqB3D,KAAK,CAACiB,S,EAsKhC,CAED,cAAeT,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {Card,Form,Button} from 'react-bootstrap';\nimport {FaCheck,FaTimes,FaUpload} from 'react-icons/fa'\n\nclass EditContact extends React.Component {\n    render() {\n    return (\n        <Card style={{ width: '450px' , height: 'auto',borderRadius:'6px'}} id=\"editCardId\">\n        <Card.Body>\n                <EditCardForm name={this.props.name} phno={this.props.phno} email={this.props.email} image={this.props.image}/>\n        </Card.Body>\n    </Card>\n    )}\n};\n\nclass EditCardForm extends React.Component {\n    constructor(props){\n        super(props);\n        this.state={fileToUpdate:null,filePreview:null,\n            fields:{name:this.props.name,phno:this.props.phno,email:this.props.email},\n            errors:{name:\"\",phno:\"\",email:\"\"}\n        };\n        this.handleCancel=this.handleCancel.bind(this);\n        this.handleSave=this.handleSave.bind(this);\n        this.updateImage=this.updateImage.bind(this);\n        this.handleChange=this.handleChange.bind(this);\n    };\n    /*componentDidMount()\n    {\n        const {name,phno,email}=this.props;\n        document.getElementById(\"name\").value=name;\n        document.getElementById(\"phno\").value=phno;\n        document.getElementById(\"email\").value=email;\n    } */\n    handleChange(event){\n        let fields=this.state.fields;\n        const nameReg=/^[A-Za-z ]{1,25}$/;\n        const phnoReg=/^[0-9]{1,10}$/;\n        if(event.target.name===\"name\")\n        {\n            if(event.target.value==='' || nameReg.test(event.target.value))\n            {\n                fields[event.target.name]=event.target.value;\n            }\n        }\n        if(event.target.name===\"phno\")\n        {\n            if(event.target.value==='' || phnoReg.test(event.target.value))\n            {\n                fields[event.target.name]=event.target.value;\n            }\n        }\n        if(event.target.name===\"email\")\n        {\n            fields[event.target.name]=event.target.value;\n        }\n        \n        this.setState({fields});\n        event.preventDefault();\n    };\n\n    handleCancel(event){\n        event.preventDefault();\n        //document.getElementById(\"editCardId\").style.display=\"none\";\n       window.location.replace(\"/\");\n        //ReactDOM.render(<App/>,document.getElementById('root'));\n    };\n\n    handleSave(event){\n        event.preventDefault();\n        //console.log(\"Display value:\",this.props)\n        if(this.validateEditContactForm())\n        {\n            console.log(\"Original Values:\",this.props);\n            console.log(\"Edited Values:\",this.state.fields,this.state.fileToUpdate);\n            let fields=this.state.fields;\n            const fd=new FormData();\n            fd.append(\"file\",this.state.fileToUpdate);\n            fd.append(\"name\",fields[\"name\"]);\n            fd.append(\"phno\",fields[\"phno\"]);\n            fd.append(\"email\",fields[\"email\"]);\n            fd.append(\"previousName\",this.props.name);\n            fd.append(\"previousPhno\",this.props.phno);\n            fd.append(\"previousEmail\",this.props.email);\n            fd.append(\"previousImage\",this.props.image);\n            //console.log(\"update picture:\",fd.get(\"file\"));\n            axios.post('http://localhost:7000/updateContact',fd,{})\n            .then((res)=>{\n                if(res.data.success)\n                {\n                    alert(\"Contact updated successfully\");\n                    window.location.replace(\"/\");\n                }\n                else{\n                    alert(\"Contact update failed\");\n                    window.location.replace(\"/\");\n                }\n            })\n        }\n    };\n\n    validateEditContactForm(){\n        let fields=this.state.fields;\n        let errors={};\n        let formIsValid=true;\n        if(!fields[\"name\"])\n        {\n            formIsValid=false;\n            errors[\"name\"]=\"Please provide contact name\";\n        }\n        if(!fields[\"phno\"])\n        {\n            formIsValid=false;\n            errors[\"phno\"]=\"Please provide contact number\";\n        }\n        if(typeof fields[\"phno\"]!==\"undefined\")\n        {\n            if(!/^[0-9]{10}$/.test(fields[\"phno\"]))\n            {\n                formIsValid=false;\n                errors[\"phno\"]=\"Please provide valid contact number\";\n                //fields[\"phno\"]=\"\";\n            }\n        }\n        /*if(typeof fields[\"email\"]!==\"undefined\")\n        {\n            if(!fields[\"email\"].match(/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/))\n            {\n                formIsValid=false;\n                errors[\"email\"]=\"Please provide valid email id or leave it empty\";\n                //fields[\"email\"]=\"\";\n            }\n        }*/\n        this.setState({errors});\n        return formIsValid;\n    };\n\n    updateImage(event){\n        this.setState({fileToUpdate:event.target.files[0]},()=>{\n            console.log(\"File to update:\",this.state.fileToUpdate);\n        })\n        this.setState({filePreview:URL.createObjectURL(event.target.files[0])},()=>{\n            console.log(\"File to update preview:\",this.state.filePreview);\n            document.getElementById(\"image\").src=this.state.filePreview;\n        })\n    };\n\n    render(){\n    return (\n        <Form onSubmit={this.handleSave} onReset={this.handleCancel} noValidate encType=\"multipart/form-data\" autoComplete=\"off\">\n            <Form.Group>\n        <Card >\n            <Card.Img variant=\"top\" id=\"image\" src= {this.props.image || \"user1.png\"} className=\"avatar-background\" alt=\"default image\" title=\"Display Picture\"/>\n        </Card>\n        </Form.Group>\n       {/* <Card.ImgOverlay className=\"align-center text-center\"> */}\n            <Form.Group>\n               <Form.Label className=\"btn btn-primary btn-block button\" htmlFor=\"update\" title=\"Change Picture\"> \n                    <Form.Control id=\"update\" name=\"update\" type=\"file\" accept=\"image/*\" className=\"d-none\" onChange={this.updateImage}/><FaUpload/>&nbsp;Change Picture\n                    </Form.Label>\n            </Form.Group>\n            <Form.Group>\n            <Form.Label>Name</Form.Label>\n            <Form.Control type=\"text\" name=\"name\" placeholder=\"Enter Name\" className=\"styled-control\" value={this.state.fields.name}  onChange={this.handleChange} title=\"Contact Name\" maxLength=\"25\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.name}</Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Phone</Form.Label>\n            <Form.Control type=\"text\" name=\"phno\" placeholder=\"Enter Phone No\" className=\"styled-control\" value={this.state.fields.phno} onChange={this.handleChange} maxLength=\"10\" title=\"Contact Number\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.phno}</Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Email</Form.Label>\n            <Form.Control type=\"email\" name=\"email\" placeholder=\"Enter Email\" className=\"styled-control\" value={this.state.fields.email} onChange={this.handleChange} title=\"Contact Email ID\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.email}</Form.Label>\n        </Form.Group>\n        <Button variant=\"primary\" className=\"button\" type=\"reset\" style={{float:'left'}} title=\"Cancel Changes\"><FaTimes></FaTimes>&nbsp;Cancel</Button> \n        <Button variant=\"primary\" className=\"button\" type=\"submit\" style={{float:'right'}} title=\"Save Changes\"><FaCheck></FaCheck>&nbsp;Save</Button> \n        \n    </Form>\n    )}\n};\n\nexport default EditContact;"]},"metadata":{},"sourceType":"module"}