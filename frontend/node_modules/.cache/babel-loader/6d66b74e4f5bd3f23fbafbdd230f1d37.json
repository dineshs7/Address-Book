{"ast":null,"code":"var _jsxFileName = \"/home/dineshubuntu/project/Address-Book/frontend/src/addContact.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Card, Form, Button } from 'react-bootstrap';\nimport { FaCheck, FaTimes, FaUpload } from 'react-icons/fa';\n\nfunction AddContact() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(Card, {\n    style: {\n      width: '450px',\n      height: 'auto',\n      borderRadius: '6px'\n    },\n    id: \"addCardId\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, React.createElement(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(Card.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, React.createElement(AddCardForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  })))));\n}\n\n;\n\nclass AddCardForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fields: {\n        name: \"\",\n        phno: \"\",\n        email: \"\"\n      },\n      errors: {\n        name: \"\",\n        phno: \"\",\n        email: \"\"\n      },\n      filePreview: null,\n      fileToUpload: null\n    };\n    this.handleCancelAddContact = this.handleCancelAddContact.bind(this);\n    this.handleSaveAddContact = this.handleSaveAddContact.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.uploadImage = this.uploadImage.bind(this);\n  }\n\n  handleCancelAddContact(event) {\n    // document.getElementById(\"addCardId\").style.display=\"none\";\n    // document.getElementById(\"addBtn\").style.display=\"block\";\n    //alert(\"clicked addcontact cancel\");\n    event.preventDefault();\n    window.location.replace(\"/\"); //ReactDOM.render(<App/>,document.getElementById('root'));\n  }\n\n  handleChange(event) {\n    let fields = this.state.fields;\n    const nameReg = /^[A-Za-z ]{1,25}$/;\n    const phnoReg = /^[0-9]{1,10}$/;\n\n    if (event.target.name === \"name\") {\n      if (event.target.value === '' || nameReg.test(event.target.value)) {\n        fields[event.target.name] = event.target.value;\n      }\n    }\n\n    if (event.target.name === \"phno\") {\n      if (event.target.value === '' || phnoReg.test(event.target.value)) {\n        fields[event.target.name] = event.target.value;\n      }\n    }\n\n    if (event.target.name === \"email\") {\n      if (event.target.value === '' || typeof event.target.value === 'undefined') {\n        fields[event.target.name] = \"\";\n      } else {\n        fields[event.target.name] = event.target.value;\n      }\n    }\n\n    this.setState({\n      fields\n    });\n    event.preventDefault();\n  }\n\n  handleSaveAddContact(event) {\n    if (this.validateAddContactForm()) {\n      let fields = this.state.fields;\n      const formData = new FormData();\n      formData.append(\"file\", this.state.fileToUpload);\n      formData.append(\"name\", fields[\"name\"].toLowerCase().split(' ').map(s => s.charAt(0).toUpperCase() + s.substring(1)).join(' '));\n      formData.append(\"phno\", fields[\"phno\"]);\n      formData.append(\"email\", fields[\"email\"]);\n      console.log(\"all fields:\", this.state.fields, this.state.fileToUpload, formData.get(\"file\"));\n      /*axios.post('http://localhost:7000/api/addContact',{\n          name:fields[\"name\"],\n          phno:fields[\"phno\"],\n          email:fields[\"email\"],\n          image:this.state.fileToUpload\n      }); */\n\n      axios.post('http://localhost:7000/addContact', formData, {}).then(res => {\n        console.log(res.data);\n\n        if (res.data.success) {\n          alert(\"Contact saved successfully\");\n          window.location.replace(\"/\");\n        } else {\n          alert(\"You already have a contact with that name/phone number\");\n          window.location.replace(\"/\");\n        }\n      }); //let fields={};\n\n      fields[\"name\"] = \"\";\n      fields[\"phno\"] = \"\";\n      fields[\"email\"] = \"\";\n      this.setState({\n        fields: fields\n      });\n    }\n\n    event.preventDefault();\n  }\n\n  validateAddContactForm() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n\n    if (!fields[\"name\"]) {\n      formIsValid = false;\n      errors[\"name\"] = \"Please provide contact name\";\n    }\n\n    if (!fields[\"phno\"]) {\n      formIsValid = false;\n      errors[\"phno\"] = \"Please provide contact number\";\n    }\n\n    if (typeof fields[\"phno\"] !== \"undefined\") {\n      if (!/^[0-9]{10}$/.test(fields[\"phno\"])) {\n        formIsValid = false;\n        errors[\"phno\"] = \"Please provide valid contact number\";\n        fields[\"phno\"] = \"\";\n      }\n    }\n    /*if(typeof fields[\"email\"]!==\"undefined\")\n    {\n        if(!fields[\"email\"].match(/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/))\n        {\n            formIsValid=false;\n            errors[\"email\"]=\"Please provide valid email id or leave it empty\";\n            fields[\"email\"]=\"\";\n        }\n    }*/\n\n\n    this.setState({\n      errors\n    });\n    return formIsValid;\n  }\n\n  uploadImage(event) {\n    this.setState({\n      filePreview: URL.createObjectURL(event.target.files[0])\n    }, () => {\n      console.log(\"Selected File:\", this.state.filePreview);\n    });\n    this.setState({\n      fileToUpload: event.target.files[0]\n    }, () => {\n      console.log(\"File to upload:\", this.state.fileToUpload);\n    });\n    /*let file=event.target.files[0];\n    var reader= new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend=()=>{\n        this.setState({base64:reader.result},()=>{\n            console.log(\"base64 image:\",this.state.base64);\n        });\n    }*/\n\n    /* axios.post('http://localhost:7000/api/uploadPhoto',formData,{}); */\n\n    event.preventDefault();\n  }\n\n  render() {\n    return React.createElement(Form, {\n      onSubmit: this.handleSaveAddContact,\n      onReset: this.handleCancelAddContact,\n      noValidate: true,\n      encType: \"multipart/form-data\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Card.Img, {\n      variant: \"top\",\n      src: this.state.filePreview || \"background.png\",\n      className: \"avatar-background\",\n      alt: \"default image\",\n      title: \"Display Picture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }))), React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      className: \"btn button btn-block btn-primary\",\n      htmlFor: \"upload\",\n      title: \"Choose Picture\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"upload\",\n      name: \"file\",\n      type: \"file\",\n      accept: \"image/*\",\n      className: \"d-none\",\n      onChange: this.uploadImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(FaUpload, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), \"\\xA0Choose Picture\")), React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Name\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Enter Name\",\n      className: \"styled-control\",\n      value: this.state.fields.name,\n      id: \"name\",\n      name: \"name\",\n      onChange: this.handleChange,\n      maxLength: \"25\",\n      title: \"Contact Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(Form.Label, {\n      className: \"error-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, this.state.errors.name)), React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Phone\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Enter Phone Number\",\n      className: \"styled-control\",\n      value: this.state.fields.phno,\n      id: \"phno\",\n      name: \"phno\",\n      onChange: this.handleChange,\n      maxLength: \"10\",\n      title: \"Contact Number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(Form.Label, {\n      className: \"error-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, this.state.errors.phno)), React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Email\"), React.createElement(Form.Control, {\n      type: \"email\",\n      placeholder: \"Enter Email\",\n      className: \"styled-control\",\n      value: this.state.fields.email,\n      id: \"email\",\n      name: \"email\",\n      onChange: this.handleChange,\n      title: \"Contact Email ID\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), React.createElement(Form.Label, {\n      className: \"error-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, this.state.errors.email)), React.createElement(Button, {\n      variant: \"primary\",\n      className: \"button\",\n      type: \"reset\",\n      style: {\n        float: 'left'\n      },\n      title: \"Cancel Save\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(FaTimes, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), \"\\xA0Cancel\"), React.createElement(Button, {\n      variant: \"primary\",\n      className: \"button\",\n      type: \"submit\",\n      style: {\n        float: 'right'\n      },\n      title: \"Save Contact\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(FaCheck, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), \"\\xA0Save\"));\n  }\n\n}\n\nexport default AddContact;","map":{"version":3,"sources":["/home/dineshubuntu/project/Address-Book/frontend/src/addContact.js"],"names":["React","axios","Card","Form","Button","FaCheck","FaTimes","FaUpload","AddContact","width","height","borderRadius","AddCardForm","Component","constructor","props","state","fields","name","phno","email","errors","filePreview","fileToUpload","handleCancelAddContact","bind","handleSaveAddContact","handleChange","uploadImage","event","preventDefault","window","location","replace","nameReg","phnoReg","target","value","test","setState","validateAddContactForm","formData","FormData","append","toLowerCase","split","map","s","charAt","toUpperCase","substring","join","console","log","get","post","then","res","data","success","alert","formIsValid","URL","createObjectURL","files","render","float"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {Card,Form,Button} from 'react-bootstrap';\nimport {FaCheck,FaTimes,FaUpload} from 'react-icons/fa'\n\nfunction AddContact() {\n    return (\n    <div>\n        <Card style={{ width: '450px' , height: 'auto',borderRadius:'6px'}} id=\"addCardId\">\n            <Card>\n                <Card.Body>\n                    <AddCardForm/>\n                </Card.Body>\n            </Card>\n        </Card>\n    </div>\n    )\n};\n\nclass AddCardForm extends React.Component {\n    constructor(props){\n        super(props);\n        this.state={fields:{name:\"\",phno:\"\",email:\"\"},errors:{name:\"\",phno:\"\",email:\"\"},filePreview:null,fileToUpload:null};\n        this.handleCancelAddContact=this.handleCancelAddContact.bind(this);\n        this.handleSaveAddContact=this.handleSaveAddContact.bind(this);\n        this.handleChange=this.handleChange.bind(this);\n        this.uploadImage=this.uploadImage.bind(this)\n    };\n\n    handleCancelAddContact(event){\n       // document.getElementById(\"addCardId\").style.display=\"none\";\n       // document.getElementById(\"addBtn\").style.display=\"block\";\n        //alert(\"clicked addcontact cancel\");\n        event.preventDefault();\n        window.location.replace(\"/\");\n        //ReactDOM.render(<App/>,document.getElementById('root'));\n    };\n\n    handleChange(event){\n        let fields=this.state.fields;\n        const nameReg=/^[A-Za-z ]{1,25}$/;\n        const phnoReg=/^[0-9]{1,10}$/;\n        if(event.target.name===\"name\")\n        {\n            if(event.target.value==='' || nameReg.test(event.target.value))\n            {\n                fields[event.target.name]=event.target.value;\n            }\n        }\n        if(event.target.name===\"phno\")\n        {\n            if(event.target.value==='' || phnoReg.test(event.target.value))\n            {\n                fields[event.target.name]=event.target.value;\n            }\n        }\n        if(event.target.name===\"email\")\n        {\n            if(event.target.value==='' || typeof event.target.value==='undefined')\n            {\n                fields[event.target.name]=\"\";\n            }\n            else{\n                fields[event.target.name]=event.target.value;\n            }\n            \n        }\n        \n        this.setState({fields});\n        event.preventDefault();\n    };\n\n    handleSaveAddContact(event){\n        if(this.validateAddContactForm())\n        {\n            let fields=this.state.fields;\n            const formData=new FormData();\n            formData.append(\"file\",this.state.fileToUpload);\n            formData.append(\"name\",fields[\"name\"].toLowerCase().split(' ').map((s)=>s.charAt(0).toUpperCase()+s.substring(1)).join(' '));\n            formData.append(\"phno\",fields[\"phno\"]);\n            formData.append(\"email\",fields[\"email\"]);\n            console.log(\"all fields:\",this.state.fields,this.state.fileToUpload,formData.get(\"file\"));\n            /*axios.post('http://localhost:7000/api/addContact',{\n                name:fields[\"name\"],\n                phno:fields[\"phno\"],\n                email:fields[\"email\"],\n                image:this.state.fileToUpload\n            }); */\n\n            axios.post('http://localhost:7000/addContact',formData,{\n            }).then((res)=>{\n                console.log(res.data);\n                if(res.data.success)\n                {\n                    alert(\"Contact saved successfully\");\n                    window.location.replace(\"/\");\n                }\n                else{\n                    alert(\"You already have a contact with that name/phone number\");\n                    window.location.replace(\"/\");\n                }\n            });\n            //let fields={};\n            fields[\"name\"]=\"\";\n            fields[\"phno\"]=\"\";\n            fields[\"email\"]=\"\";\n            this.setState({fields:fields});\n        }\n        event.preventDefault();\n    };\n\n    validateAddContactForm(){\n        let fields=this.state.fields;\n        let errors={};\n        let formIsValid=true;\n\n        if(!fields[\"name\"])\n        {\n            formIsValid=false;\n            errors[\"name\"]=\"Please provide contact name\";\n        }\n        if(!fields[\"phno\"])\n        {\n            formIsValid=false;\n            errors[\"phno\"]=\"Please provide contact number\";\n        }\n        if(typeof fields[\"phno\"]!==\"undefined\")\n        {\n            if(!/^[0-9]{10}$/.test(fields[\"phno\"]))\n            {\n                formIsValid=false;\n                errors[\"phno\"]=\"Please provide valid contact number\";\n                fields[\"phno\"]=\"\";\n            }\n        }\n        /*if(typeof fields[\"email\"]!==\"undefined\")\n        {\n            if(!fields[\"email\"].match(/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/))\n            {\n                formIsValid=false;\n                errors[\"email\"]=\"Please provide valid email id or leave it empty\";\n                fields[\"email\"]=\"\";\n            }\n        }*/\n        this.setState({errors});\n        return formIsValid;\n    };\n\n    uploadImage(event){\n        this.setState({filePreview:URL.createObjectURL(event.target.files[0])},()=>\n        {\n            console.log(\"Selected File:\",this.state.filePreview);\n        });\n        this.setState({fileToUpload:event.target.files[0]},()=>{\n            console.log(\"File to upload:\",this.state.fileToUpload);\n        })\n        /*let file=event.target.files[0];\n        var reader= new FileReader();\n        reader.readAsDataURL(file);\n        reader.onloadend=()=>{\n            this.setState({base64:reader.result},()=>{\n                console.log(\"base64 image:\",this.state.base64);\n            });\n        }*/\n       /* axios.post('http://localhost:7000/api/uploadPhoto',formData,{}); */\n        event.preventDefault();\n    };\n\n    render(){\n    return (\n    <Form onSubmit={this.handleSaveAddContact} onReset={this.handleCancelAddContact} noValidate encType=\"multipart/form-data\" autoComplete=\"off\">\n        <Form.Group>\n        <Card>\n            <Card.Img variant=\"top\" src={this.state.filePreview || \"background.png\"} className=\"avatar-background\" alt=\"default image\" title=\"Display Picture\"/>\n        </Card>\n        </Form.Group>\n       {/* <Card.ImgOverlay className=\"align-center text-center\"> */}\n        <Form.Group>\n            <Form.Label className=\"btn button btn-block btn-primary\" htmlFor=\"upload\" title=\"Choose Picture\"> \n                <input id=\"upload\" name=\"file\" type=\"file\" accept=\"image/*\" className=\"d-none\" onChange={this.uploadImage}/><FaUpload/>&nbsp;Choose Picture\n            </Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Name</Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Enter Name\" className=\"styled-control\" value={this.state.fields.name} id=\"name\" name=\"name\" onChange={this.handleChange} maxLength=\"25\" title=\"Contact Name\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.name}</Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Phone</Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Enter Phone Number\" className=\"styled-control\" value={this.state.fields.phno} id=\"phno\" name=\"phno\" onChange={this.handleChange} maxLength=\"10\" title=\"Contact Number\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.phno}</Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Email</Form.Label>\n            <Form.Control type=\"email\" placeholder=\"Enter Email\" className=\"styled-control\" value={this.state.fields.email} id=\"email\" name=\"email\" onChange={this.handleChange} title=\"Contact Email ID\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.email}</Form.Label>\n        </Form.Group>\n       <Button variant=\"primary\" className=\"button\" type=\"reset\" style={{float:'left'}} title=\"Cancel Save\"><FaTimes></FaTimes>&nbsp;Cancel</Button>\n        <Button variant=\"primary\" className=\"button\" type=\"submit\" style={{float:'right'}} title=\"Save Contact\"><FaCheck></FaCheck>&nbsp;Save</Button> \n    </Form>\n    )}\n}\n\nexport default AddContact;\n"]},"metadata":{},"sourceType":"module"}