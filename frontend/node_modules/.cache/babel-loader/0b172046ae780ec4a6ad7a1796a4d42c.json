{"ast":null,"code":"import _classCallCheck from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/dineshubuntu/project/Address-Book/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import{Card,Form,Button}from'react-bootstrap';import{FaCheck,FaTimes,FaUpload}from'react-icons/fa';function AddContact(){return React.createElement(\"div\",null,React.createElement(Card,{style:{width:'450px',height:'auto',borderRadius:'6px'},id:\"addCardId\"},React.createElement(Card,null,React.createElement(Card.Body,null,React.createElement(AddCardForm,null)))));};var AddCardForm=/*#__PURE__*/function(_React$Component){_inherits(AddCardForm,_React$Component);function AddCardForm(props){var _this;_classCallCheck(this,AddCardForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddCardForm).call(this,props));_this.state={fields:{name:\"\",phno:\"\",email:\"\"},errors:{name:\"\",phno:\"\",email:\"\"},filePreview:null,fileToUpload:null};_this.handleCancelAddContact=_this.handleCancelAddContact.bind(_assertThisInitialized(_this));_this.handleSaveAddContact=_this.handleSaveAddContact.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.uploadImage=_this.uploadImage.bind(_assertThisInitialized(_this));return _this;}_createClass(AddCardForm,[{key:\"handleCancelAddContact\",value:function handleCancelAddContact(event){// document.getElementById(\"addCardId\").style.display=\"none\";\n// document.getElementById(\"addBtn\").style.display=\"block\";\n//alert(\"clicked addcontact cancel\");\nevent.preventDefault();window.location.replace(\"/\");//ReactDOM.render(<App/>,document.getElementById('root'));\n}},{key:\"handleChange\",value:function handleChange(event){var fields=this.state.fields;var nameReg=/^[A-Za-z ]{1,25}$/;var phnoReg=/^[0-9]{1,10}$/;if(event.target.name===\"name\"){if(event.target.value===''||nameReg.test(event.target.value)){fields[event.target.name]=event.target.value;}}if(event.target.name===\"phno\"){if(event.target.value===''||phnoReg.test(event.target.value)){fields[event.target.name]=event.target.value;}}if(event.target.name===\"email\"){if(event.target.value===''||typeof event.target.value==='undefined'){fields[event.target.name]=\"\";}else{fields[event.target.name]=event.target.value;}}this.setState({fields:fields});event.preventDefault();}},{key:\"handleSaveAddContact\",value:function handleSaveAddContact(event){if(this.validateAddContactForm()){var fields=this.state.fields;var formData=new FormData();formData.append(\"file\",this.state.fileToUpload);formData.append(\"name\",fields[\"name\"].toLowerCase().split(' ').map(function(s){return s.charAt(0).toUpperCase()+s.substring(1);}).join(' '));formData.append(\"phno\",fields[\"phno\"]);formData.append(\"email\",fields[\"email\"]);console.log(\"all fields:\",this.state.fields,this.state.fileToUpload,formData.get(\"file\"));/*axios.post('http://localhost:7000/api/addContact',{\n                name:fields[\"name\"],\n                phno:fields[\"phno\"],\n                email:fields[\"email\"],\n                image:this.state.fileToUpload\n            }); */axios.post('http://localhost:7000/addContact',formData,{}).then(function(res){console.log(res.data);if(res.data.success){alert(\"Contact saved successfully\");window.location.replace(\"/\");}else{alert(\"You already have a contact with that name/phone number\");window.location.replace(\"/\");}});//let fields={};\nfields[\"name\"]=\"\";fields[\"phno\"]=\"\";fields[\"email\"]=\"\";this.setState({fields:fields});}event.preventDefault();}},{key:\"validateAddContactForm\",value:function validateAddContactForm(){var fields=this.state.fields;var errors={};var formIsValid=true;if(!fields[\"name\"]){formIsValid=false;errors[\"name\"]=\"Please provide contact name\";}if(!fields[\"phno\"]){formIsValid=false;errors[\"phno\"]=\"Please provide contact number\";}if(typeof fields[\"phno\"]!==\"undefined\"){if(!/^[0-9]{10}$/.test(fields[\"phno\"])){formIsValid=false;errors[\"phno\"]=\"Please provide valid contact number\";fields[\"phno\"]=\"\";}}/*if(typeof fields[\"email\"]!==\"undefined\")\n        {\n            if(!fields[\"email\"].match(/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/))\n            {\n                formIsValid=false;\n                errors[\"email\"]=\"Please provide valid email id or leave it empty\";\n                fields[\"email\"]=\"\";\n            }\n        }*/this.setState({errors:errors});return formIsValid;}},{key:\"uploadImage\",value:function uploadImage(event){var _this2=this;this.setState({filePreview:URL.createObjectURL(event.target.files[0])},function(){console.log(\"Selected File:\",_this2.state.filePreview);});this.setState({fileToUpload:event.target.files[0]},function(){console.log(\"File to upload:\",_this2.state.fileToUpload);});/*let file=event.target.files[0];\n        var reader= new FileReader();\n        reader.readAsDataURL(file);\n        reader.onloadend=()=>{\n            this.setState({base64:reader.result},()=>{\n                console.log(\"base64 image:\",this.state.base64);\n            });\n        }*/ /* axios.post('http://localhost:7000/api/uploadPhoto',formData,{}); */event.preventDefault();}},{key:\"render\",value:function render(){return React.createElement(Form,{onSubmit:this.handleSaveAddContact,onReset:this.handleCancelAddContact,noValidate:true,encType:\"multipart/form-data\",autoComplete:\"off\"},React.createElement(Form.Group,null,React.createElement(Card,null,React.createElement(Card.Img,{variant:\"top\",src:this.state.filePreview||\"background.png\",className:\"avatar-background\",alt:\"default image\",title:\"Display Picture\"}))),React.createElement(Form.Group,null,React.createElement(Form.Label,{className:\"btn button btn-block btn-primary\",htmlFor:\"upload\",title:\"Choose Picture\"},React.createElement(\"input\",{id:\"upload\",name:\"file\",type:\"file\",accept:\"image/*\",className:\"d-none\",onChange:this.uploadImage}),React.createElement(FaUpload,null),\"\\xA0Choose Picture\")),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Name\"),React.createElement(Form.Control,{type:\"text\",placeholder:\"Enter Name\",className:\"styled-control\",value:this.state.fields.name,id:\"name\",name:\"name\",onChange:this.handleChange,maxLength:\"25\",title:\"Contact Name\"}),React.createElement(Form.Label,{className:\"error-label\"},this.state.errors.name)),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Phone\"),React.createElement(Form.Control,{type:\"text\",placeholder:\"Enter Phone Number\",className:\"styled-control\",value:this.state.fields.phno,id:\"phno\",name:\"phno\",onChange:this.handleChange,maxLength:\"10\",title:\"Contact Number\"}),React.createElement(Form.Label,{className:\"error-label\"},this.state.errors.phno)),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Email\"),React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter Email\",className:\"styled-control\",value:this.state.fields.email,id:\"email\",name:\"email\",onChange:this.handleChange,title:\"Contact Email ID\"}),React.createElement(Form.Label,{className:\"error-label\"},this.state.errors.email)),React.createElement(Button,{variant:\"primary\",className:\"button\",type:\"reset\",style:{float:'left'},title:\"Cancel Save\"},React.createElement(FaTimes,null),\"\\xA0Cancel\"),React.createElement(Button,{variant:\"primary\",className:\"button\",type:\"submit\",style:{float:'right'},title:\"Save Contact\"},React.createElement(FaCheck,null),\"\\xA0Save\"));}}]);return AddCardForm;}(React.Component);export default AddContact;","map":{"version":3,"sources":["/home/dineshubuntu/project/Address-Book/frontend/src/addContact.js"],"names":["React","axios","Card","Form","Button","FaCheck","FaTimes","FaUpload","AddContact","width","height","borderRadius","AddCardForm","props","state","fields","name","phno","email","errors","filePreview","fileToUpload","handleCancelAddContact","bind","handleSaveAddContact","handleChange","uploadImage","event","preventDefault","window","location","replace","nameReg","phnoReg","target","value","test","setState","validateAddContactForm","formData","FormData","append","toLowerCase","split","map","s","charAt","toUpperCase","substring","join","console","log","get","post","then","res","data","success","alert","formIsValid","URL","createObjectURL","files","float","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {Card,Form,Button} from 'react-bootstrap';\nimport {FaCheck,FaTimes,FaUpload} from 'react-icons/fa'\n\nfunction AddContact() {\n    return (\n    <div>\n        <Card style={{ width: '450px' , height: 'auto',borderRadius:'6px'}} id=\"addCardId\">\n            <Card>\n                <Card.Body>\n                    <AddCardForm/>\n                </Card.Body>\n            </Card>\n        </Card>\n    </div>\n    )\n};\n\nclass AddCardForm extends React.Component {\n    constructor(props){\n        super(props);\n        this.state={fields:{name:\"\",phno:\"\",email:\"\"},errors:{name:\"\",phno:\"\",email:\"\"},filePreview:null,fileToUpload:null};\n        this.handleCancelAddContact=this.handleCancelAddContact.bind(this);\n        this.handleSaveAddContact=this.handleSaveAddContact.bind(this);\n        this.handleChange=this.handleChange.bind(this);\n        this.uploadImage=this.uploadImage.bind(this)\n    };\n\n    handleCancelAddContact(event){\n       // document.getElementById(\"addCardId\").style.display=\"none\";\n       // document.getElementById(\"addBtn\").style.display=\"block\";\n        //alert(\"clicked addcontact cancel\");\n        event.preventDefault();\n        window.location.replace(\"/\");\n        //ReactDOM.render(<App/>,document.getElementById('root'));\n    };\n\n    handleChange(event){\n        let fields=this.state.fields;\n        const nameReg=/^[A-Za-z ]{1,25}$/;\n        const phnoReg=/^[0-9]{1,10}$/;\n        if(event.target.name===\"name\")\n        {\n            if(event.target.value==='' || nameReg.test(event.target.value))\n            {\n                fields[event.target.name]=event.target.value;\n            }\n        }\n        if(event.target.name===\"phno\")\n        {\n            if(event.target.value==='' || phnoReg.test(event.target.value))\n            {\n                fields[event.target.name]=event.target.value;\n            }\n        }\n        if(event.target.name===\"email\")\n        {\n            if(event.target.value==='' || typeof event.target.value==='undefined')\n            {\n                fields[event.target.name]=\"\";\n            }\n            else{\n                fields[event.target.name]=event.target.value;\n            }\n            \n        }\n        \n        this.setState({fields});\n        event.preventDefault();\n    };\n\n    handleSaveAddContact(event){\n        if(this.validateAddContactForm())\n        {\n            let fields=this.state.fields;\n            const formData=new FormData();\n            formData.append(\"file\",this.state.fileToUpload);\n            formData.append(\"name\",fields[\"name\"].toLowerCase().split(' ').map((s)=>s.charAt(0).toUpperCase()+s.substring(1)).join(' '));\n            formData.append(\"phno\",fields[\"phno\"]);\n            formData.append(\"email\",fields[\"email\"]);\n            console.log(\"all fields:\",this.state.fields,this.state.fileToUpload,formData.get(\"file\"));\n            /*axios.post('http://localhost:7000/api/addContact',{\n                name:fields[\"name\"],\n                phno:fields[\"phno\"],\n                email:fields[\"email\"],\n                image:this.state.fileToUpload\n            }); */\n\n            axios.post('http://localhost:7000/addContact',formData,{\n            }).then((res)=>{\n                console.log(res.data);\n                if(res.data.success)\n                {\n                    alert(\"Contact saved successfully\");\n                    window.location.replace(\"/\");\n                }\n                else{\n                    alert(\"You already have a contact with that name/phone number\");\n                    window.location.replace(\"/\");\n                }\n            });\n            //let fields={};\n            fields[\"name\"]=\"\";\n            fields[\"phno\"]=\"\";\n            fields[\"email\"]=\"\";\n            this.setState({fields:fields});\n        }\n        event.preventDefault();\n    };\n\n    validateAddContactForm(){\n        let fields=this.state.fields;\n        let errors={};\n        let formIsValid=true;\n\n        if(!fields[\"name\"])\n        {\n            formIsValid=false;\n            errors[\"name\"]=\"Please provide contact name\";\n        }\n        if(!fields[\"phno\"])\n        {\n            formIsValid=false;\n            errors[\"phno\"]=\"Please provide contact number\";\n        }\n        if(typeof fields[\"phno\"]!==\"undefined\")\n        {\n            if(!/^[0-9]{10}$/.test(fields[\"phno\"]))\n            {\n                formIsValid=false;\n                errors[\"phno\"]=\"Please provide valid contact number\";\n                fields[\"phno\"]=\"\";\n            }\n        }\n        /*if(typeof fields[\"email\"]!==\"undefined\")\n        {\n            if(!fields[\"email\"].match(/^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/))\n            {\n                formIsValid=false;\n                errors[\"email\"]=\"Please provide valid email id or leave it empty\";\n                fields[\"email\"]=\"\";\n            }\n        }*/\n        this.setState({errors});\n        return formIsValid;\n    };\n\n    uploadImage(event){\n        this.setState({filePreview:URL.createObjectURL(event.target.files[0])},()=>\n        {\n            console.log(\"Selected File:\",this.state.filePreview);\n        });\n        this.setState({fileToUpload:event.target.files[0]},()=>{\n            console.log(\"File to upload:\",this.state.fileToUpload);\n        })\n        /*let file=event.target.files[0];\n        var reader= new FileReader();\n        reader.readAsDataURL(file);\n        reader.onloadend=()=>{\n            this.setState({base64:reader.result},()=>{\n                console.log(\"base64 image:\",this.state.base64);\n            });\n        }*/\n       /* axios.post('http://localhost:7000/api/uploadPhoto',formData,{}); */\n        event.preventDefault();\n    };\n\n    render(){\n    return (\n    <Form onSubmit={this.handleSaveAddContact} onReset={this.handleCancelAddContact} noValidate encType=\"multipart/form-data\" autoComplete=\"off\">\n        <Form.Group>\n        <Card>\n            <Card.Img variant=\"top\" src={this.state.filePreview || \"background.png\"} className=\"avatar-background\" alt=\"default image\" title=\"Display Picture\"/>\n        </Card>\n        </Form.Group>\n       {/* <Card.ImgOverlay className=\"align-center text-center\"> */}\n        <Form.Group>\n            <Form.Label className=\"btn button btn-block btn-primary\" htmlFor=\"upload\" title=\"Choose Picture\"> \n                <input id=\"upload\" name=\"file\" type=\"file\" accept=\"image/*\" className=\"d-none\" onChange={this.uploadImage}/><FaUpload/>&nbsp;Choose Picture\n            </Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Name</Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Enter Name\" className=\"styled-control\" value={this.state.fields.name} id=\"name\" name=\"name\" onChange={this.handleChange} maxLength=\"25\" title=\"Contact Name\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.name}</Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Phone</Form.Label>\n            <Form.Control type=\"text\" placeholder=\"Enter Phone Number\" className=\"styled-control\" value={this.state.fields.phno} id=\"phno\" name=\"phno\" onChange={this.handleChange} maxLength=\"10\" title=\"Contact Number\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.phno}</Form.Label>\n        </Form.Group>\n        <Form.Group>\n            <Form.Label>Email</Form.Label>\n            <Form.Control type=\"email\" placeholder=\"Enter Email\" className=\"styled-control\" value={this.state.fields.email} id=\"email\" name=\"email\" onChange={this.handleChange} title=\"Contact Email ID\"/>\n            <Form.Label className=\"error-label\">{this.state.errors.email}</Form.Label>\n        </Form.Group>\n       <Button variant=\"primary\" className=\"button\" type=\"reset\" style={{float:'left'}} title=\"Cancel Save\"><FaTimes></FaTimes>&nbsp;Cancel</Button>\n        <Button variant=\"primary\" className=\"button\" type=\"submit\" style={{float:'right'}} title=\"Save Contact\"><FaCheck></FaCheck>&nbsp;Save</Button> \n    </Form>\n    )}\n}\n\nexport default AddContact;\n"]},"metadata":{},"sourceType":"module"}